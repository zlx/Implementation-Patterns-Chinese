### 集合

我必须说我不希望这个章节过长。当我刚开始写得时候，我认为我可以使用 API 文档--类型和操作，来结束这个章节。基本观点很简单：集合中的对象和不在集合中的对象的区别的一个集合。还有什么要说呢？

后来我发现集合这个话题要远比我设想的要丰富，不管是它的结构还是对完成沟通意图的帮助。集合的概念混合了多个不同的含义。这个含义根据你使用集合的方式不同而改变。每种集合接口都表示了不同的打包对象这个主题。每种实现有表示了其他东西，大部分时候是对性能的影响。结论就是要学会更好的用代码交流，就要学会使用集合。

类似集合的实现以前是通过在数据结构里面提供引用的链接来实现的：文件的每一页都有到上一页和下一页的链接。近年来，开始流行在集合里面使用独立的对象。这样可以让一个对象不加修改就可以放在多个不同的集合。

集合是很重要的，因为它们可以表达程序上一种很基本的变化--数量的变化。逻辑上的变化是通过条件表达式和多态消息来表示的。数据基数上的变化是通过将一个数据塞到集合里面来表示的。集合的这种精确的细节揭示了原程序作者的意图。

有句谚语说：只有0， 1， 和”很多“是有意思的数字（这不是一个数值分析者说的）。如果一个属性不存在表示 0， 存在表示 1，那么一个属性存储一个集合就是表示 ”很多“。

集合处在程序语言构造器和库之间的某个位置。集合非常普遍，也被很好的理解了，以至于很多现代语言支持了类似于 `plural unique Book books` 之类的表达式，而不是使用 `CurrentCollection<Book> books = new HashSet<Book>();`。在集合没成为一等公民之前，知道如何使用当前的集合库来直接地表示通用的概念是很重要的。

这个章节分为六部分：集合背后的含义，使用集合所表达的问题；集合接口和它对于读者的含义；集合的实现和它们表示的意思；Collections 类所能使用的函数；最后讨论了一下如何扩展集合。

### 集合的含义

就像上面建议的一样，集合表示了多种含义。第一个就是它表示了一个多值变量。一个指向一个集合的变量和一个同时指向多个对象的变量是不一样的。从这个方面看，集合代表了多个不同的对象。集合的标识是没什么意义的，集合中的对象才是最重要的。就像所有变量一样，你可以赋值，获取结果或者发送变量消息。

这种多值的变量的含义在 Java 中不存在，因为 Java 中集合中的不同对象是有标识的。集合的另外一个含义是：它是一个对象。你可以获取一个对象，到处传递，相等比较以及给它发消息。集合可以再对象间共享，尽管这样可能导致混淆问题。因为集合是一个关联的接口和实现的集合，它们可以扩展，不管是扩展接口还是添加新的实现。所以，尽管集合是一个多值的变量，它同时也是一个对象。

这两种含义的混合导致了很多有趣的影响。因为集合是一个对象的实现，所以当你传递它的时候，你得到的是一个引用而不是变量的内容。对集合中值得修改会反映到调用的地方。这种传递引用的方式在很多年以前就不流行了，因为它可能带来非预期的后果。当你不确定一个变量在哪些地方会修改时，你就很难去调试。存在一些在集合上编程的惯例可以避免出现难读的代码和预计哪些地方会被修改。

集合的第三个有意义的含义是：它是数学上的集合。集合是聚集对象的，就像数学上的集合是聚集元素的。一个集合将世界分为集合内和集合外。程序上得集合也将对象世界分为集合内的对象和集合外的对象。数学上集合的两个基本操作是获取它的基数（集合里面的 size()）和测试是否包含（集合里面的 contains()）。

数学上的集合含义是集合的一种近似。集合[数]的另外一些操作--合集，叉集，差异，和对称差异---并没有在集合中直接体现。这到底是因为这些操作没什么用还是因为这些操作做不到而不能用是一个很有意思的争论。

### 集合中的问题





